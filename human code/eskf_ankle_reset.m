function [Xt,reset_dx] = eskf_ankle_reset(in1,in2)
%ESKF_ANKLE_RESET
%    [XT,RESET_DX] = ESKF_ANKLE_RESET(IN1,IN2)

%    This function was generated by the Symbolic Math Toolbox version 8.6.
%    30-Aug-2021 16:54:50

dmag_north1 = in2(37,:);
dmag_north2 = in2(38,:);
dmag_north3 = in2(39,:);
footp1 = in1(1,:);
footp2 = in1(2,:);
footp3 = in1(3,:);
footv1 = in1(4,:);
footv2 = in1(5,:);
footv3 = in1(6,:);
footdp1 = in2(1,:);
footdp2 = in2(2,:);
footdq1 = in2(7,:);
footdp3 = in2(3,:);
footdq2 = in2(8,:);
footdq3 = in2(9,:);
footdv1 = in2(4,:);
footdv2 = in2(5,:);
footdv3 = in2(6,:);
footquat1 = in1(7,:);
footquat2 = in1(8,:);
footquat3 = in1(9,:);
footquat4 = in1(10,:);
footabias1 = in1(11,:);
footabias2 = in1(12,:);
footabias3 = in1(13,:);
footwbias1 = in1(14,:);
footwbias2 = in1(15,:);
footwbias3 = in1(16,:);
footmdist1 = in1(17,:);
footmdist2 = in1(18,:);
footmdist3 = in1(19,:);
footdabias1 = in2(10,:);
footdabias2 = in2(11,:);
footdabias3 = in2(12,:);
footdwbias1 = in2(13,:);
footdwbias2 = in2(14,:);
footdwbias3 = in2(15,:);
footdmdist1 = in2(16,:);
footdmdist2 = in2(17,:);
footdmdist3 = in2(18,:);
mag_north1 = in1(39,:);
mag_north2 = in1(40,:);
mag_north3 = in1(41,:);
shankp1 = in1(20,:);
shankp2 = in1(21,:);
shankp3 = in1(22,:);
shankv1 = in1(23,:);
shankv2 = in1(24,:);
shankv3 = in1(25,:);
shankdp1 = in2(19,:);
shankdp2 = in2(20,:);
shankdq1 = in2(25,:);
shankdp3 = in2(21,:);
shankdq2 = in2(26,:);
shankdq3 = in2(27,:);
shankdv1 = in2(22,:);
shankdv2 = in2(23,:);
shankdv3 = in2(24,:);
shankquat1 = in1(26,:);
shankquat2 = in1(27,:);
shankquat3 = in1(28,:);
shankquat4 = in1(29,:);
shankabias1 = in1(30,:);
shankabias2 = in1(31,:);
shankabias3 = in1(32,:);
shankwbias1 = in1(33,:);
shankwbias2 = in1(34,:);
shankwbias3 = in1(35,:);
shankmdist1 = in1(36,:);
shankmdist2 = in1(37,:);
shankmdist3 = in1(38,:);
shankdabias1 = in2(28,:);
shankdabias2 = in2(29,:);
shankdabias3 = in2(30,:);
shankdwbias1 = in2(31,:);
shankdwbias2 = in2(32,:);
shankdwbias3 = in2(33,:);
shankdmdist1 = in2(34,:);
shankdmdist2 = in2(35,:);
shankdmdist3 = in2(36,:);
t2 = footdq1.^2;
t3 = footdq2.^2;
t4 = footdq3.^2;
t5 = shankdq1.^2;
t6 = shankdq2.^2;
t7 = shankdq3.^2;
t8 = -footquat1;
t9 = -shankquat1;
t10 = (footdq1.*footquat1)./2.0;
t11 = (footdq1.*footquat2)./2.0;
t12 = (footdq2.*footquat1)./2.0;
t13 = (footdq1.*footquat3)./2.0;
t14 = (footdq2.*footquat2)./2.0;
t15 = (footdq3.*footquat1)./2.0;
t16 = (footdq1.*footquat4)./2.0;
t17 = (footdq2.*footquat3)./2.0;
t18 = (footdq3.*footquat2)./2.0;
t19 = (footdq2.*footquat4)./2.0;
t20 = (footdq3.*footquat3)./2.0;
t21 = (footdq3.*footquat4)./2.0;
t22 = (shankdq1.*shankquat1)./2.0;
t23 = (shankdq1.*shankquat2)./2.0;
t24 = (shankdq2.*shankquat1)./2.0;
t25 = (shankdq1.*shankquat3)./2.0;
t26 = (shankdq2.*shankquat2)./2.0;
t27 = (shankdq3.*shankquat1)./2.0;
t28 = (shankdq1.*shankquat4)./2.0;
t29 = (shankdq2.*shankquat3)./2.0;
t30 = (shankdq3.*shankquat2)./2.0;
t31 = (shankdq2.*shankquat4)./2.0;
t32 = (shankdq3.*shankquat3)./2.0;
t33 = (shankdq3.*shankquat4)./2.0;
t34 = t2./4.0;
t35 = t3./4.0;
t36 = t4./4.0;
t37 = -t14;
t38 = -t16;
t39 = -t20;
t40 = t5./4.0;
t41 = t6./4.0;
t42 = t7./4.0;
t43 = -t26;
t44 = -t28;
t45 = -t32;
t52 = t9+t23+t29+t33;
t56 = t8+t11+t17+t21;
t46 = footquat2+t10+t19+t39;
t47 = footquat3+t12+t18+t38;
t48 = footquat4+t13+t15+t37;
t49 = shankquat2+t22+t31+t45;
t50 = shankquat3+t24+t30+t44;
t51 = shankquat4+t25+t27+t43;
t60 = t34+t35+t36+1.0;
t61 = t40+t41+t42+1.0;
t62 = t56.^2;
t65 = t52.^2;
t53 = t49.^2;
t54 = t50.^2;
t55 = t51.^2;
t57 = t46.^2;
t58 = t47.^2;
t59 = t48.^2;
t63 = t60.^2;
t64 = t61.^2;
t66 = 1.0./sqrt(t63);
t67 = 1.0./sqrt(t64);
t74 = t57+t58+t59+t62;
t75 = t53+t54+t55+t65;
t68 = (footdq1.*t66)./2.0;
t69 = (footdq2.*t66)./2.0;
t70 = (footdq3.*t66)./2.0;
t71 = (shankdq1.*t67)./2.0;
t72 = (shankdq2.*t67)./2.0;
t73 = (shankdq3.*t67)./2.0;
t76 = 1.0./sqrt(t75);
t77 = 1.0./sqrt(t74);
Xt = [footp1+footdp1;footp2+footdp2;footp3+footdp3;footv1+footdv1;footv2+footdv2;footv3+footdv3;-t56.*t77;t46.*t77;t47.*t77;t48.*t77;footabias1+footdabias1;footabias2+footdabias2;footabias3+footdabias3;footwbias1+footdwbias1;footwbias2+footdwbias2;footwbias3+footdwbias3;footmdist1+footdmdist1;footmdist2+footdmdist2;footmdist3+footdmdist3;shankp1+shankdp1;shankp2+shankdp2;shankp3+shankdp3;shankv1+shankdv1;shankv2+shankdv2;shankv3+shankdv3;-t52.*t76;t49.*t76;t50.*t76;t51.*t76;shankabias1+shankdabias1;shankabias2+shankdabias2;shankabias3+shankdabias3;shankwbias1+shankdwbias1;shankwbias2+shankdwbias2;shankwbias3+shankdwbias3;shankmdist1+shankdmdist1;shankmdist2+shankdmdist2;shankmdist3+shankdmdist3;dmag_north1+mag_north1;dmag_north2+mag_north2;dmag_north3+mag_north3];
if nargout > 1
    reset_dx = reshape([1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,t66,-t70,t69,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,t70,t66,-t68,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-t69,t68,t66,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,t67,-t73,t72,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,t73,t67,-t71,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-t72,t71,t67,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0],[39,39]);
end
